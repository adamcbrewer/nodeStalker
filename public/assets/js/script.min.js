(function(e,t){e=e||{};Modernizr.load({load:[e.siteUrl+"/assets/js/libs/jq-1.8.2.min.js",e.siteUrl+"/assets/js/libs/moment-1.7.2.js"],complete:function(){var t=$("#terminals"),n=$(".terminal");t.on("click",".terminal",function(e){e.preventDefault();n.not(this).removeClass("active");this.classList.add("active")});$(window).on("keyup",function(e){e.keyCode===27&&n.removeClass("active")});e.socket.on("broadcast",function(t){console.log(t);t.results&&t.results.osData&&e.updateTerminals(t.results.osData);t.results&&t.results.logs&&e.updateLogs(t.results.logs)});e.updateTerminals=function(e){console.log(e);var t;if(e.uptime){t=$('[data-os="uptime"]');var n=moment.duration(e.uptime*1e3).humanize(),r=e.uptime+" seconds";t.find('[data-output="main"]').html(n);t.find('[data-output="raw"]').html(r)}if(e.freemem&&e.totalmem){t=$('[data-os="freemem"]');var i=Math.round(e.freemem/1024/1024)+" MB",s=e.freemem+" bytes",o=Math.round(e.freemem/e.totalmem*100)+"%";t.find('[data-output="main"]').html(i+" / "+o);t.find('[data-bar="free"]').css("width",o);t.find('[data-output="raw"]').html(s)}if(e.loadavg){t=$('[data-os="loadavg"]');var u=0,a="",f="";type="";for(u;u<e.loadavg.length;u++){u===0?type="1min":u===1?type="5min":type="15min";a+="<li>"+e.loadavg[u].toFixed(2)+"</li>";f+="<li>"+type+"</li>"}t.find('[data-output="main"]').html(a);t.find('[data-output="raw"]').html(f)}};e.updateLogs=function(e){var t=null;if(e.apacheErr){t=$('[data-log="apacheErr"]');t.find('[data-output="main"]').html(e.apacheErr.latestLines.join("<br />"))}};e.displayDetails=function(e){}}})})(App,Modernizr);